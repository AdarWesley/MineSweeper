<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/knockout-3.2.0.debug.js"></script>
    <link href="default.css" rel="stylesheet" />
</head>
<body oncontextmenu="return false;">
    <table>
        <tbody data-bind="foreach: Rows">
            <tr data-bind="foreach: Cols">
                <td><a data-bind="click: cellClick, event: {contextmenu: cellClick }"><span data-bind="css: calcClass">.</span></a></td>
        </tbody>
    </table>
    <script type="text/javascript">
        var ROWS = 5;
        var COLS = 5;

        function Cell(rowNum, colNum) {
            var self = this;
            self.row = ko.observable(rowNum);
            self.col = ko.observable(colNum);

            self.hasMine = ko.observable(false);
            self.isCoverred = ko.observable(true);

            self.lable = ko.computed(function () {
                return self.row() + "." + self.col();
            });

            self.calcClass = ko.computed(function () {
                return "cell coverred";
            });

            self.cellClick = function (cell, evt) {
                alert("Btn: " + evt.which + ", Shft: " + evt.shiftKey + ", Ctrl: " + evt.ctrlKey);
                return false;
            }

            return self;
        }

        function Row(rowNum) {
            var self = this;
            self.Cols = ko.observableArray();
            for (var i = 0; i < COLS; i++) {
                self.Cols().push(new Cell(rowNum, i));
            }
            return self;
        }

        function ViewModel() {
            var self = this;
            self.Rows = ko.observableArray()
            for (var i = 0; i < ROWS; i++) {
                self.Rows().push(new Row(i));
            }
            return self;
        };

        ko.applyBindings(new ViewModel());
    </script>
</body>
</html>
